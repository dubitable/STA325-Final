---
title: "trees"
output: pdf_document
---

```{r}
set.seed(123)

library(caret)
library(randomForest)

source("../cleandata.R")
source("../confusionmatrix.R")
source("../partition.R")
source("../eval.R")
```

```{r}
diabetes_raw <- read.csv("../data/diabetes_012_health_indicators_BRFSS2015.csv")
diabetes <- cleandata(diabetes_raw)
head(diabetes)
```

```{r}
diabetes |> count(Diabetes_012)
```

```{r}
split <- partition(diabetes, 0.8)
train <- split$train
test <- split$test

train |> count(Diabetes_012)
```

```{r}
rf.model <- randomForest(Diabetes_012 ~ ., data = train, importance = TRUE)
```

```{r}
pred <- predict(rf.model, newdata = test)
cm <- confusionMatrix(pred, test$Diabetes_012) 
plot_cm(cm)
```

```{r}
qwk_score(pred, test$Diabetes_012)
mae_ord(pred, test$Diabetes_012)
```

